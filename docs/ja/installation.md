# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨è¨­å®š

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€Laravel Spectrumã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‹ã‚‰åˆæœŸè¨­å®šã¾ã§ã‚’è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚

## ğŸ“‹ è¦ä»¶

- **PHP** 8.1ä»¥ä¸Š
- **Laravel** 10.xã€11.xã€12.x ã¾ãŸã¯ **Lumen** 10.xã€11.xã€12.x
- **Composer** 2.0ä»¥ä¸Š

## ğŸš€ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### Composerã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
composer require wadakatu/laravel-spectrum --dev
```

### Laravelã®è‡ªå‹•æ¤œå‡º

Laravel 5.5ä»¥é™ã§ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¯è‡ªå‹•çš„ã«ç™»éŒ²ã•ã‚Œã¾ã™ã€‚

### Lumenã§ã®è¨­å®š

Lumenã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€`bootstrap/app.php`ã«ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’æ‰‹å‹•ã§ç™»éŒ²ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

```php
$app->register(LaravelSpectrum\SpectrumServiceProvider::class);
```

## âš™ï¸ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å…¬é–‹

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹å ´åˆã¯ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¬é–‹ã—ã¾ã™ï¼š

```bash
php artisan vendor:publish --provider="LaravelSpectrum\SpectrumServiceProvider" --tag="config"
```

ã“ã‚Œã«ã‚ˆã‚Šã€`config/spectrum.php`ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ã€‚

## ğŸ”§ åŸºæœ¬è¨­å®š

### APIã®åŸºæœ¬æƒ…å ±

```php
// config/spectrum.php
return [
    'title' => env('APP_NAME', 'Laravel') . ' API',
    'version' => '1.0.0',
    'description' => 'API documentation generated by Laravel Spectrum',
];
```

### ãƒ«ãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«å«ã‚ã‚‹ãƒ«ãƒ¼ãƒˆã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŒ‡å®šã—ã¾ã™ï¼š

```php
'route_patterns' => [
    'api/*',
    'api/v1/*',
    'api/v2/*',
],
```

### é™¤å¤–ãƒ«ãƒ¼ãƒˆ

ç‰¹å®šã®ãƒ«ãƒ¼ãƒˆã‚’ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰é™¤å¤–ã™ã‚‹å ´åˆï¼š

```php
'excluded_routes' => [
    'api/health',
    'api/ping',
    '_debugbar/*',
],
```

## ğŸ” èªè¨¼è¨­å®š

### Bearer Tokenï¼ˆJWT/Sanctumï¼‰

```php
'authentication' => [
    'default' => 'bearer',
    'flows' => [
        'bearer' => [
            'type' => 'http',
            'scheme' => 'bearer',
            'bearerFormat' => 'JWT',
        ],
    ],
],
```

### API Keyèªè¨¼

```php
'authentication' => [
    'default' => 'api_key',
    'flows' => [
        'api_key' => [
            'type' => 'apiKey',
            'in' => 'header',
            'name' => 'X-API-Key',
        ],
    ],
],
```

## ğŸ¨ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### ã‚¿ã‚°ã®è¨­å®š

ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’æ•´ç†ã™ã‚‹ãŸã‚ã®ã‚¿ã‚°ãƒãƒƒãƒ”ãƒ³ã‚°ï¼š

```php
'tags' => [
    'api/v1/auth/*' => 'Authentication',
    'api/v1/users/*' => 'User Management',
    'api/v1/posts/*' => 'Blog Posts',
    'api/v1/admin/*' => 'Administration',
],
```

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

```php
'example_generation' => [
    'use_faker' => true,
    'faker_locale' => 'ja_JP',
    'faker_seed' => 12345, // ä¸€è²«ã—ãŸä¾‹ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
    'custom_generators' => [
        'status' => fn($faker) => $faker->randomElement(['active', 'inactive']),
        'role' => fn($faker) => $faker->randomElement(['admin', 'user']),
    ],
],
```

## ğŸ“ å‡ºåŠ›è¨­å®š

### å‡ºåŠ›å…ˆã®å¤‰æ›´

```php
'output' => [
    'openapi' => storage_path('app/public/api-docs/openapi.json'),
    'postman' => storage_path('app/public/api-docs/postman.json'),
    'insomnia' => storage_path('app/public/api-docs/insomnia.json'),
],
```

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®š

å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šï¼š

```php
'cache' => [
    'enabled' => true,
    'ttl' => 3600, // 1æ™‚é–“
    'directory' => storage_path('app/spectrum/cache'),
],
```

## ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### æ¨©é™ã‚¨ãƒ©ãƒ¼

ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®æ›¸ãè¾¼ã¿æ¨©é™ã‚’ç¢ºèªï¼š

```bash
chmod -R 775 storage
chmod -R 775 bootstrap/cache
```

### ãƒ«ãƒ¼ãƒˆãŒæ¤œå‡ºã•ã‚Œãªã„

1. `route:cache`ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ï¼š
   ```bash
   php artisan route:clear
   ```

2. ãƒ«ãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæ­£ã—ã„ã‹ç¢ºèªï¼š
   ```php
   // config/spectrum.php
   'route_patterns' => [
       'api/*', // ã™ã¹ã¦ã®APIãƒ«ãƒ¼ãƒˆ
   ],
   ```

### Lumenã§artisanã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆãªã„

Lumenã®å ´åˆã€ã‚³ãƒãƒ³ãƒ‰ã‚’æ‰‹å‹•ã§ç™»éŒ²ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

```php
// bootstrap/app.php
if ($app->runningInConsole()) {
    $app->register(LaravelSpectrum\SpectrumServiceProvider::class);
}
```

## ğŸ“š æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- [åŸºæœ¬çš„ãªä½¿ã„æ–¹](./basic-usage.md) - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç”Ÿæˆæ–¹æ³•
- [æ©Ÿèƒ½ä¸€è¦§](./features.md) - åˆ©ç”¨å¯èƒ½ãªå…¨æ©Ÿèƒ½
- [è¨­å®šãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](./config-reference.md) - è©³ç´°ãªè¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³